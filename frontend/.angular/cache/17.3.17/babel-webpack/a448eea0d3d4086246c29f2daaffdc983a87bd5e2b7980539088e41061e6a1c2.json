{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"@angular/common\";\nfunction MatchResultsComponent_div_4_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 15);\n  }\n  if (rf & 2) {\n    const res_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵstyleProp(\"background-image\", \"url(\" + res_r2.profile.photo_url + \")\");\n  }\n}\nfunction MatchResultsComponent_div_4_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"a\", 16);\n    i0.ɵɵtext(2, \"LinkedIn profile\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const res_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"href\", res_r2.profile.profile_url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction MatchResultsComponent_div_4_div_12_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const match_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" (\", match_r3.reason, \")\");\n  }\n}\nfunction MatchResultsComponent_div_4_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, MatchResultsComponent_div_4_div_12_span_2_Template, 2, 1, \"span\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const match_r3 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r3.badgeClass(match_r3.score));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", match_r3.persona_name, \" - \", match_r3.score, \"% \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", match_r3.reason);\n  }\n}\nfunction MatchResultsComponent_div_4_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const res_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\\u201C\", res_r2.profile.headline, \"\\u201D\");\n  }\n}\nfunction MatchResultsComponent_div_4_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"strong\");\n    i0.ɵɵtext(2, \"About\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const res_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(res_r2.profile.about_summary);\n  }\n}\nfunction MatchResultsComponent_div_4_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const res_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r3.error[res_r2.profile.full_name]);\n  }\n}\nfunction MatchResultsComponent_div_4_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"strong\");\n    i0.ɵɵtext(2, \"AI reasoning\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 7);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const res_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r3.explanations[res_r2.profile.full_name]);\n  }\n}\nfunction MatchResultsComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4);\n    i0.ɵɵtemplate(2, MatchResultsComponent_div_4_div_2_Template, 1, 2, \"div\", 5);\n    i0.ɵɵelementStart(3, \"div\")(4, \"div\", 6);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 7);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 7);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, MatchResultsComponent_div_4_div_10_Template, 3, 1, \"div\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 9);\n    i0.ɵɵtemplate(12, MatchResultsComponent_div_4_div_12_Template, 3, 4, \"div\", 10);\n    i0.ɵɵpipe(13, \"slice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, MatchResultsComponent_div_4_div_14_Template, 2, 1, \"div\", 8)(15, MatchResultsComponent_div_4_div_15_Template, 5, 1, \"div\", 11);\n    i0.ɵɵelementStart(16, \"div\", 12)(17, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function MatchResultsComponent_div_4_Template_button_click_17_listener() {\n      const res_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.requestExplanation(res_r2.profile.full_name, res_r2.profile));\n    });\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, MatchResultsComponent_div_4_div_19_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(20, MatchResultsComponent_div_4_div_20_Template, 5, 1, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const res_r2 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", res_r2.profile.photo_url);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(res_r2.profile.full_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", res_r2.profile.current_title, \" @ \", res_r2.profile.current_company, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(res_r2.profile.location);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", res_r2.profile.profile_url);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(13, 12, res_r2.matches, 0, 3));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", res_r2.profile.headline);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", res_r2.profile.about_summary);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.loading[res_r2.profile.full_name] ? \"Getting AI insight...\" : \"AI insight\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.error[res_r2.profile.full_name]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.explanations[res_r2.profile.full_name]);\n  }\n}\nexport let MatchResultsComponent = /*#__PURE__*/(() => {\n  class MatchResultsComponent {\n    constructor(api) {\n      this.api = api;\n      this.results = [];\n      this.filterPersona = \"\";\n      this.minScore = 0;\n      this.explanations = {};\n      this.loading = {};\n      this.error = {};\n      this.chatInput = {};\n      this.chatHistory = {};\n      this.chatLoading = {};\n      this.chatErrors = {};\n    }\n    filtered() {\n      return this.results.map(r => ({\n        ...r,\n        matches: r.matches.filter(m => m.score >= (this.minScore || 0) && m.persona_name.toLowerCase().includes((this.filterPersona || \"\").toLowerCase()))\n      })).filter(r => r.matches.length);\n    }\n    badgeClass(score) {\n      if (score >= 70) return \"badge success\";\n      if (score >= 40) return \"badge warn\";\n      return \"badge low\";\n    }\n    requestExplanation(profileId, profile) {\n      if (this.loading[profileId]) return;\n      this.loading[profileId] = true;\n      this.error[profileId] = \"\";\n      this.api.getAiExplanation(profile).subscribe({\n        next: resp => {\n          this.explanations[profileId] = resp.explanation;\n          this.loading[profileId] = false;\n        },\n        error: err => {\n          this.error[profileId] = err.message || \"Failed to get AI explanation\";\n          this.loading[profileId] = false;\n        }\n      });\n    }\n    submitChat(profileId, profile) {\n      const question = (this.chatInput[profileId] || \"\").trim();\n      if (!question || this.chatLoading[profileId]) return;\n      this.chatLoading[profileId] = true;\n      this.chatErrors[profileId] = \"\";\n      const history = this.chatHistory[profileId] || [];\n      this.api.chatWithProspect({\n        profile,\n        question,\n        history\n      }).subscribe({\n        next: resp => {\n          this.chatHistory[profileId] = resp.history;\n          this.chatInput[profileId] = \"\";\n          this.chatLoading[profileId] = false;\n        },\n        error: err => {\n          this.chatErrors[profileId] = err?.error?.error || err.message || \"Chat request failed\";\n          this.chatLoading[profileId] = false;\n        }\n      });\n    }\n    static {\n      this.ɵfac = function MatchResultsComponent_Factory(t) {\n        return new (t || MatchResultsComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MatchResultsComponent,\n        selectors: [[\"app-match-results\"]],\n        inputs: {\n          results: \"results\",\n          filterPersona: \"filterPersona\",\n          minScore: \"minScore\"\n        },\n        decls: 5,\n        vars: 1,\n        consts: [[1, \"card\"], [1, \"profile-grid\"], [\"class\", \"profile-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"profile-card\"], [1, \"profile-header\"], [\"class\", \"avatar\", 3, \"backgroundImage\", 4, \"ngIf\"], [1, \"name\"], [1, \"muted\"], [\"class\", \"muted\", 4, \"ngIf\"], [1, \"matches\"], [\"class\", \"badge\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"actions\"], [1, \"btn\", \"secondary\", 3, \"click\"], [\"class\", \"ai-reason card\", 4, \"ngIf\"], [1, \"avatar\"], [\"target\", \"_blank\", \"rel\", \"noopener\", 3, \"href\"], [1, \"badge\", 3, \"ngClass\"], [\"class\", \"muted-reason\", 4, \"ngIf\"], [1, \"muted-reason\"], [1, \"ai-reason\", \"card\"]],\n        template: function MatchResultsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Match results\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 1);\n            i0.ɵɵtemplate(4, MatchResultsComponent_div_4_Template, 21, 16, \"div\", 2);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngForOf\", ctx.filtered());\n          }\n        },\n        dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i2.SlicePipe],\n        styles: [\"h2[_ngcontent-%COMP%]{margin-top:0}.muted[_ngcontent-%COMP%]{color:var(--muted);font-size:.9rem}.muted-reason[_ngcontent-%COMP%]{color:var(--muted);font-size:.85rem}.chat-block[_ngcontent-%COMP%]{margin-top:1rem;padding-top:.75rem;border-top:1px solid rgba(0,0,0,.08)}.chat-block[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid rgba(0,0,0,.1);border-radius:4px;padding:.5rem;font-family:inherit}.chat-history[_ngcontent-%COMP%]{margin-top:.5rem;max-height:180px;overflow-y:auto;background:#00000008;border-radius:4px;padding:.5rem}.chat-line[_ngcontent-%COMP%]{margin-bottom:.35rem}.chat-line.assistant[_ngcontent-%COMP%]{color:#1a5fb4}.chat-line.user[_ngcontent-%COMP%]{color:#2d2d2d}.btn.small[_ngcontent-%COMP%]{padding:.35rem .75rem;font-size:.85rem}\"]\n      });\n    }\n  }\n  return MatchResultsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}