{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from \"@angular/core\";\nlet MatchResultsComponent = class MatchResultsComponent {\n  constructor(api) {\n    this.api = api;\n    this.results = [];\n    this.filterPersona = \"\";\n    this.minScore = 0;\n    this.explanations = {};\n    this.loading = {};\n    this.error = {};\n    this.chatInput = {};\n    this.chatHistory = {};\n    this.chatLoading = {};\n    this.chatErrors = {};\n  }\n  filtered() {\n    return this.results.map(r => ({\n      ...r,\n      matches: r.matches.filter(m => m.score >= (this.minScore || 0) && m.persona_name.toLowerCase().includes((this.filterPersona || \"\").toLowerCase()))\n    })).filter(r => r.matches.length);\n  }\n  badgeClass(score) {\n    if (score >= 70) return \"badge success\";\n    if (score >= 40) return \"badge warn\";\n    return \"badge low\";\n  }\n  requestExplanation(profileId, profile) {\n    if (this.loading[profileId]) return;\n    this.loading[profileId] = true;\n    this.error[profileId] = \"\";\n    this.api.getAiExplanation(profile).subscribe({\n      next: resp => {\n        this.explanations[profileId] = resp.explanation;\n        this.loading[profileId] = false;\n      },\n      error: err => {\n        this.error[profileId] = err.message || \"Failed to get AI explanation\";\n        this.loading[profileId] = false;\n      }\n    });\n  }\n  submitChat(profileId, profile) {\n    const question = (this.chatInput[profileId] || \"\").trim();\n    if (!question || this.chatLoading[profileId]) return;\n    this.chatLoading[profileId] = true;\n    this.chatErrors[profileId] = \"\";\n    const history = this.chatHistory[profileId] || [];\n    this.api.chatWithProspect({\n      profile,\n      question,\n      history\n    }).subscribe({\n      next: resp => {\n        this.chatHistory[profileId] = resp.history;\n        this.chatInput[profileId] = \"\";\n        this.chatLoading[profileId] = false;\n      },\n      error: err => {\n        this.chatErrors[profileId] = err?.error?.error || err.message || \"Chat request failed\";\n        this.chatLoading[profileId] = false;\n      }\n    });\n  }\n};\n__decorate([Input()], MatchResultsComponent.prototype, \"results\", void 0);\n__decorate([Input()], MatchResultsComponent.prototype, \"filterPersona\", void 0);\n__decorate([Input()], MatchResultsComponent.prototype, \"minScore\", void 0);\nMatchResultsComponent = __decorate([Component({\n  selector: \"app-match-results\",\n  templateUrl: \"./match-results.component.html\",\n  styleUrls: [\"./match-results.component.scss\"]\n})], MatchResultsComponent);\nexport { MatchResultsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}