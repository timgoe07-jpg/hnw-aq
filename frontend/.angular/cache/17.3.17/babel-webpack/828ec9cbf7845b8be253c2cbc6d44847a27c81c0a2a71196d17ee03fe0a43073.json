{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nlet ProfileUploadComponent = class ProfileUploadComponent {\n  constructor(api, auth) {\n    this.api = api;\n    this.auth = auth;\n    this.jsonInput = \"\";\n    this.parsedProfiles = [];\n    this.results = [];\n    this.loading = false;\n    this.filterPersona = \"\";\n    this.filterMinScore = 0;\n    this.useAi = false;\n    this.linkedInConnected = false;\n    this.autoMaxResults = 5;\n  }\n  ngOnInit() {\n    this.linkedInConnected = this.auth.isConnected();\n    if (this.linkedInConnected) {\n      this.autoSearch();\n    }\n  }\n  onJsonSubmit() {\n    this.error = undefined;\n    try {\n      const parsed = JSON.parse(this.jsonInput);\n      if (!Array.isArray(parsed)) {\n        throw new Error(\"JSON should be an array of profiles\");\n      }\n      this.parsedProfiles = parsed;\n      this.runMatch();\n    } catch (err) {\n      this.error = err.message;\n    }\n  }\n  onCsvSelected(event) {\n    const file = event.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = e => {\n      const text = e.target.result;\n      this.parsedProfiles = this.parseCsv(text);\n      this.runMatch();\n    };\n    reader.readAsText(file);\n  }\n  parseCsv(text) {\n    const rows = text.split(/\\r?\\n/).filter(l => l.trim().length);\n    if (!rows.length) return [];\n    const [headerLine, ...lines] = rows;\n    const headers = headerLine.split(\",\").map(h => h.trim());\n    return lines.map(line => {\n      const cols = line.split(\",\").map(c => c.trim());\n      const row = {};\n      headers.forEach((h, i) => row[h] = cols[i]);\n      return {\n        full_name: row.name || row.full_name,\n        current_title: row.title || row.current_title,\n        current_company: row.company || row.current_company,\n        about_summary: row.summary || row.about_summary,\n        industry: row.industry,\n        headline: row.headline\n      };\n    });\n  }\n  runMatch() {\n    if (!this.parsedProfiles.length) {\n      this.error = \"No profiles to match.\";\n      return;\n    }\n    this.loading = true;\n    const req$ = this.useAi ? this.api.matchProfilesAi({\n      profiles: this.parsedProfiles\n    }) : this.api.matchProfiles({\n      profiles: this.parsedProfiles\n    });\n    req$.subscribe({\n      next: resp => {\n        this.results = resp.results;\n        this.loading = false;\n      },\n      error: err => {\n        this.error = err.message || \"Match request failed\";\n        this.loading = false;\n      }\n    });\n  }\n  autoSearch() {\n    this.error = undefined;\n    this.loading = true;\n    this.api.getSuggestedProfiles({\n      maxResults: this.autoMaxResults\n    }).subscribe({\n      next: resp => {\n        this.results = resp.profiles || resp.results || [];\n        this.loading = false;\n      },\n      error: err => {\n        this.error = err.message || \"LinkedIn search failed\";\n        this.loading = false;\n      }\n    });\n  }\n  connectLinkedIn() {\n    this.auth.startLinkedInLogin();\n  }\n};\nProfileUploadComponent = __decorate([Component({\n  selector: \"app-profile-upload\",\n  templateUrl: \"./profile-upload.component.html\",\n  styleUrls: [\"./profile-upload.component.scss\"]\n})], ProfileUploadComponent);\nexport { ProfileUploadComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}