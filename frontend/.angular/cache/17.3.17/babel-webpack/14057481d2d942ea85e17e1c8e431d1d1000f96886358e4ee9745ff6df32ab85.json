{"ast":null,"code":"import { MatTableDataSource } from \"@angular/material/table\";\nimport { forkJoin, of } from \"rxjs\";\nimport { catchError } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/card\";\nimport * as i6 from \"@angular/material/table\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/progress-spinner\";\nimport * as i10 from \"@angular/material/sort\";\nimport * as i11 from \"@angular/material/paginator\";\nimport * as i12 from \"ng2-charts\";\nconst _c0 = [\"investorPaginator\"];\nconst _c1 = [\"loanPaginator\"];\nconst _c2 = [\"investorSort\"];\nconst _c3 = [\"loanSort\"];\nconst _c4 = () => [\"#ef4444\", \"#f59e0b\", \"#22c55e\"];\nconst _c5 = (a0, a1) => ({\n  data: a0,\n  backgroundColor: a1\n});\nconst _c6 = a0 => [a0];\nconst _c7 = (a0, a1) => ({\n  labels: a0,\n  datasets: a1\n});\nconst _c8 = a0 => ({\n  data: a0,\n  backgroundColor: \"#19c3b1\"\n});\nconst _c9 = a0 => ({\n  data: a0,\n  backgroundColor: \"#0ea5e9\"\n});\nconst _c10 = a0 => ({\n  data: a0,\n  borderColor: \"#19c3b1\",\n  backgroundColor: \"rgba(25,195,177,0.25)\",\n  tension: 0.3,\n  fill: true\n});\nconst _c11 = () => ({\n  display: false\n});\nconst _c12 = a0 => ({\n  legend: a0\n});\nconst _c13 = () => ({\n  color: \"#9bb0c9\"\n});\nconst _c14 = a0 => ({\n  ticks: a0\n});\nconst _c15 = a0 => ({\n  ticks: a0,\n  beginAtZero: true\n});\nconst _c16 = (a0, a1) => ({\n  x: a0,\n  y: a1\n});\nconst _c17 = (a0, a1) => ({\n  responsive: true,\n  plugins: a0,\n  scales: a1\n});\nconst _c18 = a0 => ({\n  data: a0,\n  label: \"Churn\",\n  borderColor: \"#ef4444\",\n  backgroundColor: \"rgba(239,68,68,0.15)\",\n  tension: 0.25,\n  fill: true\n});\nconst _c19 = a0 => ({\n  data: a0,\n  label: \"Default\",\n  borderColor: \"#f59e0b\",\n  backgroundColor: \"rgba(245,158,11,0.15)\",\n  tension: 0.25,\n  fill: true\n});\nconst _c20 = (a0, a1) => [a0, a1];\nconst _c21 = a0 => ({\n  labels: a0\n});\nconst _c22 = a0 => ({\n  data: a0,\n  backgroundColor: \"#f59e0b\"\n});\nconst _c23 = () => [5, 10, 25];\nconst _c24 = a0 => ({\n  width: a0\n});\nconst _c25 = (a0, a1) => ({\n  width: a0,\n  background: a1\n});\nfunction DashboardComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"Generated \", i0.ɵɵpipeBind2(2, 1, ctx_r0.report == null ? null : ctx_r0.report.generated_at, \"short\"), \"\");\n  }\n}\nfunction DashboardComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"mat-progress-spinner\", 19);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_p_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate3(\" High churn by tolerance: low=\", (ctx_r0.report == null ? null : ctx_r0.report.summary_kpis.churn_by_tolerance == null ? null : ctx_r0.report.summary_kpis.churn_by_tolerance.low) || 0, \", medium=\", (ctx_r0.report == null ? null : ctx_r0.report.summary_kpis.churn_by_tolerance == null ? null : ctx_r0.report.summary_kpis.churn_by_tolerance.medium) || 0, \", high=\", (ctx_r0.report == null ? null : ctx_r0.report.summary_kpis.churn_by_tolerance == null ? null : ctx_r0.report.summary_kpis.churn_by_tolerance.high) || 0, \" \");\n  }\n}\nfunction DashboardComponent_div_13_table_29_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"span\", 35);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const inv_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(inv_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.formatPercent(inv_r3.probability));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", inv_r3.bucket.toLowerCase());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(inv_r3.bucket);\n  }\n}\nfunction DashboardComponent_div_13_table_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 33)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Probability\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Bucket\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"tbody\");\n    i0.ɵɵtemplate(10, DashboardComponent_div_13_table_29_tr_10_Template, 8, 4, \"tr\", 34);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.topInvestors());\n  }\n}\nfunction DashboardComponent_div_13_ng_template_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \"No investors found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_table_35_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"span\", 35);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const loan_r4 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"#\", loan_r4.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(loan_r4.sector);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(7, 6, loan_r4.amount, \"1.0-0\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.formatPercent(loan_r4.probability));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", loan_r4.bucket.toLowerCase());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(loan_r4.bucket);\n  }\n}\nfunction DashboardComponent_div_13_table_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 33)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Sector\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Amount\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Probability\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Bucket\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"tbody\");\n    i0.ɵɵtemplate(14, DashboardComponent_div_13_table_35_tr_14_Template, 13, 9, \"tr\", 34);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.topLoans());\n  }\n}\nfunction DashboardComponent_div_13_ng_template_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \"No loans found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_pre_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"pre\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.report.report_markdown);\n  }\n}\nfunction DashboardComponent_div_13_div_70_th_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 53);\n    i0.ɵɵtext(1, \"Name\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_70_td_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i_r5.name);\n  }\n}\nfunction DashboardComponent_div_13_div_70_th_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"Risk\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_70_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54)(1, \"span\", 35);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r6 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i_r6.risk_tolerance);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i_r6.risk_tolerance);\n  }\n}\nfunction DashboardComponent_div_13_div_70_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"AUM\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_70_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54)(1, \"div\", 56);\n    i0.ɵɵelement(2, \"span\", 57);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r7 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(5, _c24, ctx_r0.Math.min(i_r7.aum, 5000000) / 5000000 * 100 + \"%\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" $\", i0.ɵɵpipeBind2(4, 2, i_r7.aum, \"1.0-0\"), \"\");\n  }\n}\nfunction DashboardComponent_div_13_div_70_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"Engagement\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_70_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r8 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, i_r8.engagement_score, \"1.0-0\"));\n  }\n}\nfunction DashboardComponent_div_13_div_70_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"Open Rate\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_70_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"percent\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r9 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, i_r9.email_open_rate, \"1.0-0\"));\n  }\n}\nfunction DashboardComponent_div_13_div_70_th_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 53);\n    i0.ɵɵtext(1, \"Churn\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_70_td_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54)(1, \"span\", 35);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r10 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i_r10.risk_bucket == null ? null : i_r10.risk_bucket.toLowerCase());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i_r10.risk_bucket);\n  }\n}\nfunction DashboardComponent_div_13_div_70_th_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"Yield\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_70_td_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"percent\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r11 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, i_r11.distribution_yield, \"1.1-1\"));\n  }\n}\nfunction DashboardComponent_div_13_div_70_th_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"Meetings\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_70_td_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r12 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i_r12.meetings_last_quarter);\n  }\n}\nfunction DashboardComponent_div_13_div_70_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 58);\n  }\n}\nfunction DashboardComponent_div_13_div_70_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 59);\n  }\n}\nfunction DashboardComponent_div_13_div_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"table\", 38, 4);\n    i0.ɵɵelementContainerStart(3, 39);\n    i0.ɵɵtemplate(4, DashboardComponent_div_13_div_70_th_4_Template, 2, 0, \"th\", 40)(5, DashboardComponent_div_13_div_70_td_5_Template, 2, 1, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(6, 42);\n    i0.ɵɵtemplate(7, DashboardComponent_div_13_div_70_th_7_Template, 2, 0, \"th\", 43)(8, DashboardComponent_div_13_div_70_td_8_Template, 3, 2, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(9, 44);\n    i0.ɵɵtemplate(10, DashboardComponent_div_13_div_70_th_10_Template, 2, 0, \"th\", 43)(11, DashboardComponent_div_13_div_70_td_11_Template, 5, 7, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(12, 45);\n    i0.ɵɵtemplate(13, DashboardComponent_div_13_div_70_th_13_Template, 2, 0, \"th\", 43)(14, DashboardComponent_div_13_div_70_td_14_Template, 3, 4, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(15, 46);\n    i0.ɵɵtemplate(16, DashboardComponent_div_13_div_70_th_16_Template, 2, 0, \"th\", 43)(17, DashboardComponent_div_13_div_70_td_17_Template, 3, 4, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(18, 47);\n    i0.ɵɵtemplate(19, DashboardComponent_div_13_div_70_th_19_Template, 2, 0, \"th\", 40)(20, DashboardComponent_div_13_div_70_td_20_Template, 3, 2, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(21, 48);\n    i0.ɵɵtemplate(22, DashboardComponent_div_13_div_70_th_22_Template, 2, 0, \"th\", 43)(23, DashboardComponent_div_13_div_70_td_23_Template, 3, 4, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(24, 49);\n    i0.ɵɵtemplate(25, DashboardComponent_div_13_div_70_th_25_Template, 2, 0, \"th\", 43)(26, DashboardComponent_div_13_div_70_td_26_Template, 2, 1, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(27, DashboardComponent_div_13_div_70_tr_27_Template, 1, 0, \"tr\", 50)(28, DashboardComponent_div_13_div_70_tr_28_Template, 1, 0, \"tr\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(29, \"mat-paginator\", 52, 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"dataSource\", ctx_r0.investorSource);\n    i0.ɵɵadvance(26);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r0.investorColumns);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r0.investorColumns);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"pageSize\", 5)(\"pageSizeOptions\", i0.ɵɵpureFunction0(5, _c23));\n  }\n}\nfunction DashboardComponent_div_13_ng_template_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \"No investor rows available.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_81_th_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"ID\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_81_td_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const l_r13 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"#\", l_r13.id, \"\");\n  }\n}\nfunction DashboardComponent_div_13_div_81_th_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"Sector\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_81_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const l_r14 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(l_r14.sector);\n  }\n}\nfunction DashboardComponent_div_13_div_81_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"Amount\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_81_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const l_r15 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(2, 1, l_r15.amount, \"1.0-0\"), \"\");\n  }\n}\nfunction DashboardComponent_div_13_div_81_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"LTV\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_81_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const l_r16 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, l_r16.ltv_ratio, \"1.2-2\"));\n  }\n}\nfunction DashboardComponent_div_13_div_81_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"Term\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_81_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const l_r17 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", l_r17.term_months, \" mo\");\n  }\n}\nfunction DashboardComponent_div_13_div_81_th_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 55);\n    i0.ɵɵtext(1, \"DSCR\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_81_td_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54)(1, \"div\", 56);\n    i0.ɵɵelement(2, \"span\", 57);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const l_r18 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(5, _c25, ctx_r0.Math.min(l_r18.dscr || 2, 2) / 2 * 100 + \"%\", l_r18.dscr && l_r18.dscr < 1 ? \"#ef4444\" : \"#19c3b1\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(4, 2, l_r18.dscr, \"1.2-2\"), \"\");\n  }\n}\nfunction DashboardComponent_div_13_div_81_th_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 53);\n    i0.ɵɵtext(1, \"Default\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_div_81_td_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 54)(1, \"span\", 35);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const l_r19 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", l_r19.risk_bucket == null ? null : l_r19.risk_bucket.toLowerCase());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(l_r19.risk_bucket);\n  }\n}\nfunction DashboardComponent_div_13_div_81_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 58);\n  }\n}\nfunction DashboardComponent_div_13_div_81_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 59);\n  }\n}\nfunction DashboardComponent_div_13_div_81_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37)(1, \"table\", 38, 6);\n    i0.ɵɵelementContainerStart(3, 60);\n    i0.ɵɵtemplate(4, DashboardComponent_div_13_div_81_th_4_Template, 2, 0, \"th\", 43)(5, DashboardComponent_div_13_div_81_td_5_Template, 2, 1, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(6, 61);\n    i0.ɵɵtemplate(7, DashboardComponent_div_13_div_81_th_7_Template, 2, 0, \"th\", 43)(8, DashboardComponent_div_13_div_81_td_8_Template, 2, 1, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(9, 62);\n    i0.ɵɵtemplate(10, DashboardComponent_div_13_div_81_th_10_Template, 2, 0, \"th\", 43)(11, DashboardComponent_div_13_div_81_td_11_Template, 3, 4, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(12, 63);\n    i0.ɵɵtemplate(13, DashboardComponent_div_13_div_81_th_13_Template, 2, 0, \"th\", 43)(14, DashboardComponent_div_13_div_81_td_14_Template, 3, 4, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(15, 64);\n    i0.ɵɵtemplate(16, DashboardComponent_div_13_div_81_th_16_Template, 2, 0, \"th\", 43)(17, DashboardComponent_div_13_div_81_td_17_Template, 2, 1, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(18, 65);\n    i0.ɵɵtemplate(19, DashboardComponent_div_13_div_81_th_19_Template, 2, 0, \"th\", 43)(20, DashboardComponent_div_13_div_81_td_20_Template, 5, 8, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(21, 47);\n    i0.ɵɵtemplate(22, DashboardComponent_div_13_div_81_th_22_Template, 2, 0, \"th\", 40)(23, DashboardComponent_div_13_div_81_td_23_Template, 3, 2, \"td\", 41);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(24, DashboardComponent_div_13_div_81_tr_24_Template, 1, 0, \"tr\", 50)(25, DashboardComponent_div_13_div_81_tr_25_Template, 1, 0, \"tr\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(26, \"mat-paginator\", 52, 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"dataSource\", ctx_r0.loanSource);\n    i0.ɵɵadvance(23);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r0.loanColumns);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r0.loanColumns);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"pageSize\", 5)(\"pageSizeOptions\", i0.ɵɵpureFunction0(5, _c23));\n  }\n}\nfunction DashboardComponent_div_13_ng_template_82_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \"No loan rows available.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"mat-card\", 21)(2, \"mat-card-title\");\n    i0.ɵɵtext(3, \"Investor Churn Buckets\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"canvas\", 22);\n    i0.ɵɵelementStart(5, \"p\", 23);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"number\");\n    i0.ɵɵpipe(8, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"mat-card\", 21)(10, \"mat-card-title\");\n    i0.ɵɵtext(11, \"Loan Default Buckets\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"canvas\", 22);\n    i0.ɵɵelementStart(13, \"p\", 23);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"mat-card\", 21)(17, \"mat-card-title\");\n    i0.ɵɵtext(18, \"Engagement Snapshot\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"p\", 23);\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"p\", 23);\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(25, DashboardComponent_div_13_p_25_Template, 2, 3, \"p\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"mat-card\", 25)(27, \"mat-card-title\");\n    i0.ɵɵtext(28, \"Top At-Risk Investors\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(29, DashboardComponent_div_13_table_29_Template, 11, 1, \"table\", 26)(30, DashboardComponent_div_13_ng_template_30_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"mat-card\", 25)(33, \"mat-card-title\");\n    i0.ɵɵtext(34, \"Top At-Risk Loans\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(35, DashboardComponent_div_13_table_35_Template, 15, 1, \"table\", 26)(36, DashboardComponent_div_13_ng_template_36_Template, 2, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"mat-card\", 25)(39, \"mat-card-title\");\n    i0.ɵɵtext(40, \"Sector Exposure\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(41, \"canvas\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"mat-card\", 25)(43, \"mat-card-title\");\n    i0.ɵɵtext(44, \"AUM Distribution\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(45, \"canvas\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"mat-card\", 25)(47, \"mat-card-title\");\n    i0.ɵɵtext(48, \"Engagement & Yield (median)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(49, \"canvas\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"mat-card\", 25)(51, \"mat-card-title\");\n    i0.ɵɵtext(52, \"Churn & Default Trend (synthetic)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(53, \"canvas\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(54, \"mat-card\", 25)(55, \"mat-card-title\");\n    i0.ɵɵtext(56, \"DSCR Quantiles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(57, \"canvas\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"mat-card\", 25)(59, \"mat-card-title\");\n    i0.ɵɵtext(60, \"Report Preview\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(61, DashboardComponent_div_13_pre_61_Template, 2, 1, \"pre\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(62, \"mat-card\", 25)(63, \"mat-card-title\");\n    i0.ɵɵtext(64);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(65, \"div\", 28)(66, \"mat-form-field\", 29)(67, \"mat-label\");\n    i0.ɵɵtext(68, \"Filter investors\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(69, \"input\", 30);\n    i0.ɵɵlistener(\"keyup\", function DashboardComponent_div_13_Template_input_keyup_69_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.applyInvestorFilter($event.target.value));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(70, DashboardComponent_div_13_div_70_Template, 31, 6, \"div\", 31)(71, DashboardComponent_div_13_ng_template_71_Template, 2, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(73, \"mat-card\", 25)(74, \"mat-card-title\");\n    i0.ɵɵtext(75);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(76, \"div\", 28)(77, \"mat-form-field\", 29)(78, \"mat-label\");\n    i0.ɵɵtext(79, \"Filter loans\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(80, \"input\", 32);\n    i0.ɵɵlistener(\"keyup\", function DashboardComponent_div_13_Template_input_keyup_80_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.applyLoanFilter($event.target.value));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(81, DashboardComponent_div_13_div_81_Template, 28, 6, \"div\", 31)(82, DashboardComponent_div_13_ng_template_82_Template, 2, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const noInvestors_r20 = i0.ɵɵreference(31);\n    const noLoans_r21 = i0.ɵɵreference(37);\n    const noInvestorRows_r22 = i0.ɵɵreference(72);\n    const noLoanRows_r23 = i0.ɵɵreference(83);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"data\", i0.ɵɵpureFunction2(59, _c7, ctx_r0.charts.churnBuckets.labels, i0.ɵɵpureFunction1(57, _c6, i0.ɵɵpureFunction2(54, _c5, ctx_r0.charts.churnBuckets.data, i0.ɵɵpureFunction0(53, _c4)))))(\"options\", ctx_r0.chartOptions)(\"type\", \"bar\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" Avg churn risk: \", i0.ɵɵpipeBind2(7, 38, ctx_r0.report == null ? null : ctx_r0.report.summary_kpis.avg_churn_risk, \"1.2-2\"), \" (prev: \", i0.ɵɵpipeBind2(8, 41, ctx_r0.report == null ? null : ctx_r0.report.summary_kpis.prev_day_avg_churn_risk, \"1.2-2\"), \") \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"data\", i0.ɵɵpureFunction2(68, _c7, ctx_r0.charts.defaultBuckets.labels, i0.ɵɵpureFunction1(66, _c6, i0.ɵɵpureFunction2(63, _c5, ctx_r0.charts.defaultBuckets.data, i0.ɵɵpureFunction0(62, _c4)))))(\"options\", ctx_r0.chartOptions)(\"type\", \"bar\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" High-risk exposure: $\", i0.ɵɵpipeBind2(15, 44, ctx_r0.report == null ? null : ctx_r0.report.summary_kpis.high_default_exposure, \"1.0-0\"), \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Avg engagement: \", i0.ɵɵpipeBind2(21, 47, ctx_r0.report == null ? null : ctx_r0.report.summary_kpis.engagement_avg, \"1.1-1\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Avg email open rate: \", i0.ɵɵpipeBind2(24, 50, ctx_r0.report == null ? null : ctx_r0.report.summary_kpis.email_open_avg, \"1.2-2\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.report == null ? null : ctx_r0.report.summary_kpis.churn_by_tolerance);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.topInvestors().length)(\"ngIfElse\", noInvestors_r20);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.topLoans().length)(\"ngIfElse\", noLoans_r21);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"data\", i0.ɵɵpureFunction2(75, _c7, ctx_r0.charts.sectorExposure.labels, i0.ɵɵpureFunction1(73, _c6, i0.ɵɵpureFunction1(71, _c8, ctx_r0.charts.sectorExposure.data))))(\"options\", ctx_r0.chartOptions)(\"type\", \"bar\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"data\", i0.ɵɵpureFunction2(82, _c7, ctx_r0.charts.aumBuckets.labels, i0.ɵɵpureFunction1(80, _c6, i0.ɵɵpureFunction1(78, _c9, ctx_r0.charts.aumBuckets.data))))(\"options\", ctx_r0.chartOptions)(\"type\", \"bar\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"data\", i0.ɵɵpureFunction2(89, _c7, ctx_r0.charts.yieldEngagementTrend == null ? null : ctx_r0.charts.yieldEngagementTrend.labels, i0.ɵɵpureFunction1(87, _c6, i0.ɵɵpureFunction1(85, _c10, ctx_r0.charts.yieldEngagementTrend == null ? null : ctx_r0.charts.yieldEngagementTrend.data))))(\"options\", i0.ɵɵpureFunction2(104, _c17, i0.ɵɵpureFunction1(93, _c12, i0.ɵɵpureFunction0(92, _c11)), i0.ɵɵpureFunction2(101, _c16, i0.ɵɵpureFunction1(96, _c14, i0.ɵɵpureFunction0(95, _c13)), i0.ɵɵpureFunction1(99, _c15, i0.ɵɵpureFunction0(98, _c13)))))(\"type\", \"line\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"data\", i0.ɵɵpureFunction2(114, _c7, ctx_r0.timeline.dates, i0.ɵɵpureFunction2(111, _c20, i0.ɵɵpureFunction1(107, _c18, ctx_r0.timeline.churn), i0.ɵɵpureFunction1(109, _c19, ctx_r0.timeline.default))))(\"options\", i0.ɵɵpureFunction2(131, _c17, i0.ɵɵpureFunction1(120, _c12, i0.ɵɵpureFunction1(118, _c21, i0.ɵɵpureFunction0(117, _c13))), i0.ɵɵpureFunction2(128, _c16, i0.ɵɵpureFunction1(123, _c14, i0.ɵɵpureFunction0(122, _c13)), i0.ɵɵpureFunction1(126, _c15, i0.ɵɵpureFunction0(125, _c13)))))(\"type\", \"line\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"data\", i0.ɵɵpureFunction2(138, _c7, ctx_r0.charts.dscrSummary == null ? null : ctx_r0.charts.dscrSummary.labels, i0.ɵɵpureFunction1(136, _c6, i0.ɵɵpureFunction1(134, _c22, ctx_r0.charts.dscrSummary == null ? null : ctx_r0.charts.dscrSummary.data))))(\"options\", ctx_r0.chartOptions)(\"type\", \"bar\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.report);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Sample Investors (\", ctx_r0.investorSource.data.length, \")\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.investorSource.data.length)(\"ngIfElse\", noInvestorRows_r22);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Sample Loans (\", ctx_r0.loanSource.data.length, \")\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.loanSource.data.length)(\"ngIfElse\", noLoanRows_r23);\n  }\n}\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    constructor(api, snackBar, cdr) {\n      this.api = api;\n      this.snackBar = snackBar;\n      this.cdr = cdr;\n      this.investors = [];\n      this.loans = [];\n      this.loading = false;\n      this.charts = {\n        churnBuckets: {\n          labels: [],\n          data: []\n        },\n        defaultBuckets: {\n          labels: [],\n          data: []\n        },\n        sectorExposure: {\n          labels: [],\n          data: []\n        },\n        aumBuckets: {\n          labels: [],\n          data: []\n        }\n      };\n      this.timeline = {\n        dates: [],\n        churn: [],\n        default: []\n      };\n      this.chartOptions = {\n        responsive: true,\n        plugins: {\n          legend: {\n            display: false\n          }\n        },\n        scales: {\n          x: {\n            ticks: {\n              color: \"#9bb0c9\"\n            },\n            grid: {\n              color: \"rgba(255,255,255,0.05)\"\n            }\n          },\n          y: {\n            ticks: {\n              color: \"#9bb0c9\"\n            },\n            grid: {\n              color: \"rgba(255,255,255,0.05)\"\n            },\n            beginAtZero: true\n          }\n        }\n      };\n      this.samples = {\n        investors: [],\n        loans: []\n      };\n      this.investorColumns = [\"name\", \"risk_tolerance\", \"aum\", \"engagement_score\", \"email_open_rate\", \"distribution_yield\", \"meetings_last_quarter\", \"risk_bucket\"];\n      this.loanColumns = [\"id\", \"sector\", \"amount\", \"ltv_ratio\", \"term_months\", \"dscr\", \"risk_bucket\"];\n      this.investorSource = new MatTableDataSource([]);\n      this.loanSource = new MatTableDataSource([]);\n    }\n    ngOnInit() {\n      this.loadData();\n    }\n    ngAfterViewInit() {\n      this.attachTableHelpers();\n    }\n    loadData() {\n      this.loading = true;\n      this.api.batchRefresh().subscribe({\n        next: () => {\n          forkJoin({\n            investors: this.api.getInvestors(),\n            loans: this.api.getLoans(),\n            report: this.api.generateReport(),\n            analytics: this.api.getAnalyticsOverview(),\n            samples: this.api.getAnalyticsSamples(50),\n            metrics: this.api.getModelMetrics(),\n            timeline: this.api.getTimeline(45).pipe(catchError(() => of({\n              dates: [],\n              churn: [],\n              default: []\n            })))\n          }).subscribe({\n            next: ({\n              investors,\n              loans,\n              report,\n              analytics,\n              samples,\n              timeline\n            }) => {\n              this.investors = investors.items;\n              this.loans = loans.items;\n              this.report = report;\n              this.samples = samples;\n              this.timeline = timeline;\n              const investorRows = (samples.investors && samples.investors.length > 0 ? samples.investors : investors.items) || [];\n              const loanRows = (samples.loans && samples.loans.length > 0 ? samples.loans : loans.items) || [];\n              this.investorSource = new MatTableDataSource(investorRows);\n              this.loanSource = new MatTableDataSource(loanRows);\n              this.attachTableHelpers();\n              this.populateCharts(analytics);\n              this.loading = false;\n              this.cdr.detectChanges();\n            },\n            error: err => this.handleError(\"Failed to load dashboard data\", err)\n          });\n        },\n        error: err => this.handleError(\"Failed to refresh scores\", err)\n      });\n    }\n    refreshReport() {\n      this.loading = true;\n      this.api.generateReport().subscribe({\n        next: report => {\n          this.report = report;\n          this.loading = false;\n          this.snackBar.open(\"Report refreshed\", \"Close\", {\n            duration: 2000\n          });\n        },\n        error: err => this.handleError(\"Failed to refresh report\", err)\n      });\n    }\n    investorBuckets() {\n      return this.report?.summary_kpis.investor_buckets || {\n        Low: 0,\n        Medium: 0,\n        High: 0\n      };\n    }\n    loanBuckets() {\n      return this.report?.summary_kpis.loan_buckets || {\n        Low: 0,\n        Medium: 0,\n        High: 0\n      };\n    }\n    topInvestors() {\n      return this.report?.summary_kpis.top_investors || [];\n    }\n    topLoans() {\n      return this.report?.summary_kpis.top_loans || [];\n    }\n    formatPercent(prob) {\n      if (prob === undefined || prob === null) {\n        return \"0.0%\";\n      }\n      return `${(prob * 100).toFixed(1)}%`;\n    }\n    populateCharts(analytics) {\n      if (!analytics) return;\n      this.charts.churnBuckets = {\n        labels: Object.keys(analytics.churn_buckets || {}),\n        data: Object.values(analytics.churn_buckets || {})\n      };\n      this.charts.defaultBuckets = {\n        labels: Object.keys(analytics.default_buckets || {}),\n        data: Object.values(analytics.default_buckets || {})\n      };\n      const sortedSector = Object.entries(analytics.sector_exposure || {}).sort((a, b) => b[1].exposure - a[1].exposure);\n      this.charts.sectorExposure = {\n        labels: sortedSector.map(s => s[0]),\n        data: sortedSector.map(s => s[1].exposure)\n      };\n      this.charts.aumBuckets = {\n        labels: Object.keys(analytics.aum_buckets || {}),\n        data: Object.values(analytics.aum_buckets || {})\n      };\n      // Create a simple line series for yield and engagement medians to show trend-like context\n      const yieldMed = analytics.distribution_yield?.p50 ?? 0;\n      const engMed = analytics.engagement?.p50 ?? 0;\n      this.charts[\"yieldEngagementTrend\"] = {\n        labels: [\"Engagement median\", \"Yield median\"],\n        data: [engMed, yieldMed * 100]\n      };\n      const dscr = analytics.dscr || {};\n      this.charts.dscrSummary = {\n        labels: [\"p25\", \"p50\", \"p75\"],\n        data: [dscr.p25 ?? 0, dscr.p50 ?? 0, dscr.p75 ?? 0]\n      };\n    }\n    applyInvestorFilter(filterValue) {\n      this.investorSource.filter = filterValue.trim().toLowerCase();\n    }\n    applyLoanFilter(filterValue) {\n      this.loanSource.filter = filterValue.trim().toLowerCase();\n    }\n    attachTableHelpers() {\n      setTimeout(() => {\n        if (this.investorPaginator) {\n          this.investorSource.paginator = this.investorPaginator;\n          this.investorSource.paginator.pageSize = 5;\n        }\n        if (this.loanPaginator) {\n          this.loanSource.paginator = this.loanPaginator;\n          this.loanSource.paginator.pageSize = 5;\n        }\n        if (this.investorSort) this.investorSource.sort = this.investorSort;\n        if (this.loanSort) this.loanSource.sort = this.loanSort;\n        this.investorSource._updateChangeSubscription();\n        this.loanSource._updateChangeSubscription();\n      });\n    }\n    handleError(message, err) {\n      console.error(message, err);\n      this.loading = false;\n      this.snackBar.open(message, \"Close\", {\n        duration: 3000\n      });\n    }\n    static {\n      this.ɵfac = function DashboardComponent_Factory(t) {\n        return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DashboardComponent,\n        selectors: [[\"app-dashboard\"]],\n        viewQuery: function DashboardComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n            i0.ɵɵviewQuery(_c1, 5);\n            i0.ɵɵviewQuery(_c2, 5);\n            i0.ɵɵviewQuery(_c3, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.investorPaginator = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.loanPaginator = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.investorSort = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.loanSort = _t.first);\n          }\n        },\n        decls: 14,\n        vars: 5,\n        consts: [[\"noInvestors\", \"\"], [\"noLoans\", \"\"], [\"noInvestorRows\", \"\"], [\"noLoanRows\", \"\"], [\"investorSort\", \"matSort\"], [\"investorPaginator\", \"\"], [\"loanSort\", \"matSort\"], [\"loanPaginator\", \"\"], [1, \"actions\"], [1, \"page-title\"], [1, \"muted\"], [1, \"action-buttons\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", 3, \"click\", \"disabled\"], [\"mat-stroked-button\", \"\", \"color\", \"accent\", 3, \"click\", \"disabled\"], [\"class\", \"timestamp\", 4, \"ngIf\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"grid\", 4, \"ngIf\"], [1, \"timestamp\"], [1, \"loading\"], [\"mode\", \"indeterminate\", \"diameter\", \"40\"], [1, \"grid\"], [1, \"summary-card\"], [\"baseChart\", \"\", 3, \"data\", \"options\", \"type\"], [1, \"subtitle\"], [\"class\", \"subtitle\", 4, \"ngIf\"], [1, \"wide-card\"], [\"class\", \"data-table\", 4, \"ngIf\", \"ngIfElse\"], [\"class\", \"report-text\", 4, \"ngIf\"], [1, \"table-actions\"], [\"appearance\", \"fill\"], [\"matInput\", \"\", \"placeholder\", \"Name, risk, etc.\", 3, \"keyup\"], [\"class\", \"table-wrap\", 4, \"ngIf\", \"ngIfElse\"], [\"matInput\", \"\", \"placeholder\", \"Sector, bucket, id...\", 3, \"keyup\"], [1, \"data-table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"chip\", 3, \"ngClass\"], [1, \"report-text\"], [1, \"table-wrap\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"name\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"risk_tolerance\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"aum\"], [\"matColumnDef\", \"engagement_score\"], [\"matColumnDef\", \"email_open_rate\"], [\"matColumnDef\", \"risk_bucket\"], [\"matColumnDef\", \"distribution_yield\"], [\"matColumnDef\", \"meetings_last_quarter\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"showFirstLastButtons\", \"\", 3, \"pageSize\", \"pageSizeOptions\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [1, \"sparkbar\"], [3, \"ngStyle\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [\"matColumnDef\", \"id\"], [\"matColumnDef\", \"sector\"], [\"matColumnDef\", \"amount\"], [\"matColumnDef\", \"ltv_ratio\"], [\"matColumnDef\", \"term_months\"], [\"matColumnDef\", \"dscr\"]],\n        template: function DashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\")(2, \"div\", 9);\n            i0.ɵɵtext(3, \"Risk & Engagement Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 10);\n            i0.ɵɵtext(5, \"Real-time snapshot of churn and default risk.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 11)(7, \"button\", 12);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_7_listener() {\n              return ctx.refreshReport();\n            });\n            i0.ɵɵtext(8, \"Generate Report\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_9_listener() {\n              return ctx.loadData();\n            });\n            i0.ɵɵtext(10, \" Refresh Data \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(11, DashboardComponent_div_11_Template, 3, 4, \"div\", 14)(12, DashboardComponent_div_12_Template, 2, 0, \"div\", 15)(13, DashboardComponent_div_13_Template, 84, 141, \"div\", 16);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"disabled\", ctx.loading);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.loading);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.report);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n          }\n        },\n        dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.NgStyle, i4.MatButton, i5.MatCard, i5.MatCardTitle, i6.MatTable, i6.MatHeaderCellDef, i6.MatHeaderRowDef, i6.MatColumnDef, i6.MatCellDef, i6.MatRowDef, i6.MatHeaderCell, i6.MatCell, i6.MatHeaderRow, i6.MatRow, i7.MatFormField, i7.MatLabel, i8.MatInput, i9.MatProgressSpinner, i10.MatSort, i10.MatSortHeader, i11.MatPaginator, i12.BaseChartDirective, i3.DecimalPipe, i3.PercentPipe, i3.DatePipe],\n        styles: [\".actions[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:1rem;gap:.5rem;flex-wrap:wrap}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.timestamp[_ngcontent-%COMP%]{color:var(--muted);font-size:.95rem}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:2rem 0}.grid[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}.summary-card[_ngcontent-%COMP%]   .bucket-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem;margin-top:.5rem}.bucket[_ngcontent-%COMP%]{padding:.75rem;border-radius:8px;background:var(--surface-2);border:1px solid var(--border);box-shadow:inset 0 1px #ffffff08}.bucket.high[_ngcontent-%COMP%]{border-color:#ef4444;color:#ef4444}.bucket.medium[_ngcontent-%COMP%]{border-color:#f59e0b;color:#f59e0b}.bucket.low[_ngcontent-%COMP%]{border-color:#22c55e;color:#22c55e}.bucket[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.subtitle[_ngcontent-%COMP%]{margin-top:.75rem;color:var(--muted)}.wide-card[_ngcontent-%COMP%]{grid-column:1/-1}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:.6rem .35rem;border-bottom:1px solid var(--border)}.chip[_ngcontent-%COMP%]{padding:.2rem .5rem;border-radius:999px;font-size:.85rem;text-transform:capitalize}.chip.high[_ngcontent-%COMP%]{background:#ef444433;color:#ef4444}.chip.medium[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b}.chip.low[_ngcontent-%COMP%]{background:#22c55e26;color:#22c55e}.muted[_ngcontent-%COMP%]{color:var(--muted)}.report-text[_ngcontent-%COMP%]{white-space:pre-wrap;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;background:var(--surface-2);padding:.75rem;border-radius:8px;border:1px solid var(--border)}.table-wrap[_ngcontent-%COMP%]{overflow:auto;background:#fff;border-radius:8px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;color:#0f172a;background:#fff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.65rem .4rem;border-bottom:1px solid var(--border);text-align:left;color:#0f172a}th[_ngcontent-%COMP%]{background:#e2e8f0;font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background:#f8fafc}.table-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:.35rem}.sparkbar[_ngcontent-%COMP%]{display:inline-block;width:60px;height:6px;background:#ffffff14;border-radius:999px;position:relative;overflow:hidden}.sparkbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#19c3b1,#0ea5e9);border-radius:999px}\"]\n      });\n    }\n  }\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}