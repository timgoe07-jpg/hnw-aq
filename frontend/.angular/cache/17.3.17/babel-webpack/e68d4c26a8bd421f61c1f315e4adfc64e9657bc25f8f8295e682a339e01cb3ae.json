{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"@angular/common\";\nfunction MatchResultsComponent_tr_11_div_9_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const match_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" (\", match_r2.reason, \")\");\n  }\n}\nfunction MatchResultsComponent_tr_11_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, MatchResultsComponent_tr_11_div_9_span_2_Template, 2, 1, \"span\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const match_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.badgeClass(match_r2.score));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", match_r2.persona_name, \" - \", match_r2.score, \"% \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", match_r2.reason);\n  }\n}\nfunction MatchResultsComponent_tr_11_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const res_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r2.error[res_r4.profile.full_name]);\n  }\n}\nfunction MatchResultsComponent_tr_11_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 0)(1, \"strong\");\n    i0.ɵɵtext(2, \"AI reasoning:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const res_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.explanations[res_r4.profile.full_name]);\n  }\n}\nfunction MatchResultsComponent_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 2)(2, \"div\", 3);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 4);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 4);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtemplate(9, MatchResultsComponent_tr_11_div_9_Template, 3, 4, \"div\", 5);\n    i0.ɵɵpipe(10, \"slice\");\n    i0.ɵɵelementStart(11, \"div\", 6)(12, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function MatchResultsComponent_tr_11_Template_button_click_12_listener() {\n      const res_r4 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.requestExplanation(res_r4.profile.full_name, res_r4.profile));\n    });\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, MatchResultsComponent_tr_11_div_14_Template, 2, 1, \"div\", 8)(15, MatchResultsComponent_tr_11_div_15_Template, 5, 1, \"div\", 9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const res_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(res_r4.profile.full_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", res_r4.profile.current_title, \" @ \", res_r4.profile.current_company, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(res_r4.profile.industry);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(10, 8, res_r4.matches, 0, 3));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.loading[res_r4.profile.full_name] ? \"Getting AI insight...\" : \"AI insight\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.error[res_r4.profile.full_name]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.explanations[res_r4.profile.full_name]);\n  }\n}\nexport let MatchResultsComponent = /*#__PURE__*/(() => {\n  class MatchResultsComponent {\n    constructor(api) {\n      this.api = api;\n      this.results = [];\n      this.filterPersona = \"\";\n      this.minScore = 0;\n      this.explanations = {};\n      this.loading = {};\n      this.error = {};\n    }\n    filtered() {\n      return this.results.map(r => ({\n        ...r,\n        matches: r.matches.filter(m => m.score >= (this.minScore || 0) && m.persona_name.toLowerCase().includes((this.filterPersona || \"\").toLowerCase()))\n      })).filter(r => r.matches.length);\n    }\n    badgeClass(score) {\n      if (score >= 70) return \"badge success\";\n      if (score >= 40) return \"badge warn\";\n      return \"badge low\";\n    }\n    requestExplanation(profileId, profile) {\n      if (this.loading[profileId]) return;\n      this.loading[profileId] = true;\n      this.error[profileId] = \"\";\n      this.api.getAiExplanation(profile).subscribe({\n        next: resp => {\n          this.explanations[profileId] = resp.explanation;\n          this.loading[profileId] = false;\n        },\n        error: err => {\n          this.error[profileId] = err.message || \"Failed to get AI explanation\";\n          this.loading[profileId] = false;\n        }\n      });\n    }\n    static {\n      this.ɵfac = function MatchResultsComponent_Factory(t) {\n        return new (t || MatchResultsComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MatchResultsComponent,\n        selectors: [[\"app-match-results\"]],\n        inputs: {\n          results: \"results\",\n          filterPersona: \"filterPersona\",\n          minScore: \"minScore\"\n        },\n        decls: 12,\n        vars: 1,\n        consts: [[1, \"card\"], [4, \"ngFor\", \"ngForOf\"], [2, \"width\", \"30%\"], [2, \"font-weight\", \"700\"], [1, \"muted\"], [\"class\", \"badge\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [2, \"margin-top\", \"0.5rem\"], [1, \"btn\", \"secondary\", 3, \"click\"], [\"class\", \"muted\", 4, \"ngIf\"], [\"class\", \"card\", 4, \"ngIf\"], [1, \"badge\", 3, \"ngClass\"], [\"class\", \"muted-reason\", 4, \"ngIf\"], [1, \"muted-reason\"]],\n        template: function MatchResultsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Match results\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"table\")(4, \"thead\")(5, \"tr\")(6, \"th\");\n            i0.ɵɵtext(7, \"Profile\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"th\");\n            i0.ɵɵtext(9, \"Top personas\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(10, \"tbody\");\n            i0.ɵɵtemplate(11, MatchResultsComponent_tr_11_Template, 16, 12, \"tr\", 1);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(11);\n            i0.ɵɵproperty(\"ngForOf\", ctx.filtered());\n          }\n        },\n        dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i2.SlicePipe],\n        styles: [\"h2[_ngcontent-%COMP%]{margin-top:0}.muted[_ngcontent-%COMP%]{color:var(--muted);font-size:.9rem}\"]\n      });\n    }\n  }\n  return MatchResultsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}